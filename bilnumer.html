<!DOCTYPE html>
<html>
<head>
  <title>Bílnúmer</title>
  <script>
    function convertToLeetSpeak() {
      var input = document.getElementById("inputText").value.toUpperCase().replace(/[^A-Z]/g, "");
      var output = "";
      var leetPattern = {
        "A": ["4"],
        "B": ["8"],
        "E": ["3"],
        "G": ["6"],
        "I": ["1"],
        "L": ["1"],
        "O": ["0"],
        "S": ["5"],
        "T": ["7"],
        "Z": ["2"]
      };
      var leetVowelPattern = {
        "A": ["4"],
        "E": ["3"],
        "I": ["1"],
        "O": ["0"],
      };

      output = "";
      while (input.length > 0) {
        chunk = input.substr(0, 3);
        numbers = input.substr(3, 2);
        console.log(chunk);
        console.log(numbers);

        if (numbers.length == 0) {
          // not enough characters left to do the thing, pad with O's and 0's
          missing_letters = 3 - chunk.length;
          output += chunk;
          for (i = 0; i<missing_letters; i++) {
            output += "O";
          }
          output += "00"
          document.getElementById("list").innerHTML = output;
          return;
        }

        if (numbers[0] in leetPattern &&
            numbers[1] in leetPattern) {
          // happy path, both are leet
          output += chunk + leetPattern[numbers[0]][0] + leetPattern[numbers[1]][0];
          output += " ";
          input = input.substr(5, input.length);
        } else {
          if (numbers[0] in leetPattern) {
            // first letter is leet and a vowel
            output += chunk + leetPattern[numbers[0]][0] + leetPattern[numbers[0]][0];
            output += " ";
            input = input.substr(4, input.length);
          } else {
            output += chunk + '00';
            output += " ";
            input = input.substr(3, input.length);
          }
        }
      }
//todo: geyma output í array af converted chunks frekar en streng, uppá að rendera svo chunkana sem bílnúmer með css eða eitthvað
      document.getElementById("list").innerHTML = output;
    }
  </script>
</head>
<body>
  <h1>Bílnúmer</h1>
  <p>Hvaða bílar þurfa að standa hlið við hlið svo lesa megi (nokkurn veginn) þennan texta úr númerum þeirra?</p>
  <label for="inputText">Texti:</label>
  <input type="text" id="inputText">
  <button onclick="convertToLeetSpeak()">Submit</button>
  <br>
  <label for="outputText">Bílnúmer sem þarf til:</label>
  <div id="list"></div>
</body>
</html>